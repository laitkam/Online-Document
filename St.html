<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Schedule Tribe Application | Jdx Print</title>
  <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>
  <script>
    UPLOADCARE_PUBLIC_KEY = '8e4b55a12a698dc8ade4';
  </script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body class="bg-gradient-to-br from-green-100 via-white to-blue-100 min-h-screen py-10 px-4 font-sans">
  <header class="mb-8">
    <div class="flex flex-col items-center">
      <h1 class="text-4xl font-extrabold text-green-600 drop-shadow-2xl tracking-wide mb-2 animate-pulse">
        Jdx Print
      </h1>
      <div class="w-24 h-1 bg-gradient-to-r from-green-400 via-green-600 to-blue-400 rounded-full mb-4"></div>
    </div>
    <p class="text-center text-2xl font-bold text-gray-800 mb-2">
      Schedule Tribe Certificate Application
    </p>
    <p class="text-center text-lg text-gray-600 mb-2">
      Fast, easy, and hassle-free document application.<br>
      <span class="italic text-green-700">Upload all required documents below.</span>
    </p>
  </header>
  <main>
    <div class="max-w-xl mx-auto p-6 bg-white rounded-2xl shadow-2xl border-l-8 border-blue-400">
      <form id="mainForm" action="https://formspree.io/f/xzzvryge" method="POST" class="space-y-4">
        <label class="block font-semibold">Name:
          <input type="text" name="name" required class="w-full border rounded px-3 py-2 mt-1 focus:ring-2 focus:ring-green-300">
        </label>
        <label class="block font-semibold">Date of Birth:</label>
        <div class="flex gap-2 mb-2">
          <select id="dob-day" name="dob_day" required class="border rounded px-2 py-2 focus:ring-2 focus:ring-green-300">
            <option value="">Day</option>
            <!-- Days 1-31 -->
            <script>
              for(let i=1;i<=31;i++){
                document.write(`<option value="${i}">${i}</option>`);
              }
            </script>
          </select>
          <select id="dob-month" name="dob_month" required class="border rounded px-2 py-2 focus:ring-2 focus:ring-green-300">
            <option value="">Month</option>
            <option value="1">Jan</option>
            <option value="2">Feb</option>
            <option value="3">Mar</option>
            <option value="4">Apr</option>
            <option value="5">May</option>
            <option value="6">Jun</option>
            <option value="7">Jul</option>
            <option value="8">Aug</option>
            <option value="9">Sep</option>
            <option value="10">Oct</option>
            <option value="11">Nov</option>
            <option value="12">Dec</option>
          </select>
          <select id="dob-year" name="dob_year" required class="border rounded px-2 py-2 focus:ring-2 focus:ring-green-300">
            <option value="">Year</option>
            <script>
              let thisYear = new Date().getFullYear();
              for(let y=thisYear; y>=1900; y--){
                document.write(`<option value="${y}">${y}</option>`);
              }
            </script>
          </select>
        </div>
        <label class="block font-semibold">Gender:
          <select name="sex" required class="w-full border rounded px-3 py-2 mt-1 focus:ring-2 focus:ring-green-300">
            <option value="">Select</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </label>
         <label class="block font-semibold">Tribe:
  <select name="tribe" id="tribeSelect" required class="w-full border rounded px-3 py-2 mt-1 focus:ring-2 focus:ring-green-300">
    <option value="">Select Tribe</option>
    <option value="Khasi">Khasi</option>
    <option value="Jaintia">Jaintia</option>
    <option value="Garo">Garo</option>
    <option value="Other">Other</option>
  </select>
</label>

<!-- Hidden input to appear when 'Other' is selected -->
<div id="otherTribeWrapper" class="mt-2 hidden">
  <input type="text" name="tribe_other" placeholder="Please specify your tribe" class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-green-300" />
</div>
        <label class="block font-semibold">Phone Number:

          <input type="tel" name="phone" required class="w-full border rounded px-3 py-2 mt-1 focus:ring-2 focus:ring-green-300">
        </label>
        <div class="mt-4 space-y-3">
          <div class="grid grid-cols-1 gap-3">
            <label class="flex items-center gap-3 font-semibold bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 cursor-pointer">
              <span class="w-48">Passport Photo:</span>
              <input type="hidden" role="uploadcare-uploader" name="passport_photo" data-clearable />
            </label>
            <label class="flex items-center gap-3 font-semibold bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 cursor-pointer">
              <span class="w-48">Birth Certificate:</span>
              <input type="hidden" role="uploadcare-uploader" name="birth_certificate" data-clearable />
            </label>
            <label class="flex items-center gap-3 font-semibold bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 cursor-pointer">
              <span class="w-48">Village Headman Certificate:</span>
              <input type="hidden" role="uploadcare-uploader" name="village_headman" data-clearable />
            </label>
            <label class="flex items-center gap-3 font-semibold bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 cursor-pointer">
              <span class="w-48">Parents Front Voter ID:</span>
              <input type="hidden" role="uploadcare-uploader" name="parents_epic" data-clearable />
            </label>
            <label class="flex items-center gap-3 font-semibold bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 cursor-pointer">
              <span class="w-48">Parents Back Voter ID:</span>
              <input type="hidden" role="uploadcare-uploader" name="parents_backepic" data-clearable />
            </label>
            <label class="flex items-center gap-3 font-semibold bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 cursor-pointer">
              <span class="w-48">Parents Schedule Tribe Certificate:</span>
              <input type="hidden" role="uploadcare-uploader" name="parents_st" data-clearable />
            </label>
          </div>
        </div>
        <div class="mt-6 relative">
          <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-blue-600 hover:to-green-600 text-white font-bold px-4 py-2 rounded-full shadow-lg text-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400">
            Submit Application
          </button>
          <div id="loadingSpinner" class="absolute inset-0 flex items-center justify-center bg-white/50 rounded-full hidden">
            <div class="w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"></div>
          </div>
        </div>
      </form>
      <div id="thankYouMessage" style="display:none;" class="text-center mt-6 text-green-700 font-semibold">
        ‚úÖ Form Submitted, thank you.<br>
        For further assistance contact our team: <a href="tel:9862189403" class="underline text-blue-700">9862189403</a>
      </div>
      <div class="text-center mt-4">
        <a href="https://wa.me/9862189403" target="_blank" class="text-green-700 underline">üí¨ Need Help? Chat on WhatsApp</a>
      </div>
    </div>
    <div class="text-center mt-8">
      <a href="index.html" class="inline-block bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded shadow">‚¨ÖÔ∏è Back to Home</a>
    </div>
  </main>
  <script>
    // Make the entire label open the Uploadcare widget
    document.querySelectorAll('label[for], label > input[role="uploadcare-uploader"]').forEach(function(labelOrInput) {
      let label = labelOrInput.tagName === 'LABEL' ? labelOrInput : labelOrInput.parentElement;
      let input = label.querySelector('input[role="uploadcare-uploader"]');
      if (input) {
        label.addEventListener('click', function(e) {
          if (e.target !== input) {
            e.preventDefault();
            input.click();
          }
        });
      }
    });

    document.getElementById('mainForm').addEventListener('submit', function(e) {
      var day = document.getElementById('dob-day').value;
      var month = document.getElementById('dob-month').value;
      var year = document.getElementById('dob-year').value;
      var dobInput = document.getElementById('dob');
      if(day && month && year) {
        dobInput.value = `${year}-${month.padStart(2,'0')}-${day.padStart(2,'0')}`;
      } else {
        alert('Please select complete Date of Birth.');
        e.preventDefault();
        return false;
      }
      // List all required uploadcare input names here
      const requiredUploads = [
        'passport_photo',
        'birth_certificate',
        'village_headman',
        'parents_epic',
        'parents_backepic',
        'parents_st'
      ];
      let missing = [];
      requiredUploads.forEach(function(name) {
        const val = document.querySelector('input[name="' + name + '"]').value;
        if (!val) missing.push(name.replace(/_/g, ' '));
      });
      if (missing.length > 0) {
        alert('Please upload the following documents before submitting:\n\n' + missing.join('\n'));
        e.preventDefault();
      } else {
        // Show loading spinner
        document.getElementById('loadingSpinner').classList.remove('hidden');
      }
    });

    // Hide loading spinner when form submission completes
    document.getElementById('mainForm').addEventListener('formdata', function() {
      document.getElementById('loadingSpinner').classList.add('hidden');
      document.getElementById('thankYouMessage').style.display = 'block';
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    flatpickr("#dob", {
      dateFormat: "Y-m-d",
      maxDate: "today",
      disableMobile: false // true = always use flatpickr, false = use native on mobile (scroll wheel)
    });
  </script>
  <script>
  document.getElementById('tribeSelect').addEventListener('change', function () {
    const otherWrapper = document.getElementById('otherTribeWrapper');
    if (this.value === 'Other') {
      otherWrapper.classList.remove('hidden');
    } else {
      otherWrapper.classList.add('hidden');
    }
  });
</script>

</body>
</html>
